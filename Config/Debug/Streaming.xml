<?xml version="1.0" encoding="utf-8" ?>
<appconfig>
  <watchsharing>
    <type>none</type> <!-- one of debug, none, follwit and trakt -->
    <username></username>
    <passwordHash></passwordHash>
  </watchsharing>
  
  <ffmpeg>
    <path>..\..\..\..\Libraries\Streaming\ffmpeg.exe</path>
    <api>ffmpeg</api>
  </ffmpeg>

  <tvLogoDirectory>C:\ProgramData\Team MediaPortal\MediaPortal\thumbs\tv\logos</tvLogoDirectory>

  <defaultStreams>
    <audio>en</audio>
    <subtitle>none</subtitle>
  </defaultStreams>
  
  <transcoders>
    <!-- Android ffmpeg profile -->
    <transcoder>
      <name>Android FFmpeg</name>
      <description>Android FFmpeg test profile</description>
      <bandwidth>1200</bandwidth>
      <target>android</target>
      <transport>http</transport>
      <maxOutputWidth>800</maxOutputWidth>
      <maxOutputHeight>600</maxOutputHeight>
      <mime>video/MP2T</mime>
      <videoStream>true</videoStream>

      <transcoderConfiguration implementation="MPExtended.Services.StreamingService.Transcoders.FFMpeg">
        <codecParameters>-codec:v libx264 -b:v 768k -profile:v baseline -preset:v fast -coder rle -codec:a aac -b:a 160k -ac 2 -strict experimental -async 1 -sn -f mpegts</codecParameters>
      </transcoderConfiguration>      
    </transcoder>
    
    <!-- The new VLC profile -->
    <transcoder>
      <name>Android VLC</name>
      <description>Android VLC test profile</description>
      <bandwidth>700</bandwidth>
      <target>android</target>
      <transport>http</transport>
      <mime>video/MP2T</mime>
      <videoStream>true</videoStream>
      <maxOutputWidth>800</maxOutputWidth>
      <maxOutputHeight>600</maxOutputHeight>

      <transcoderConfiguration implementation="MPExtended.Services.StreamingService.Transcoders.VLCWrapper">
        <disableSeeking>no</disableSeeking>
        <path>..\..\..\..\Libraries\Streaming\vlc-1.1.11\MPExtended.Libraries.VLCWrapper.exe</path>
        <options>--ffmpeg-hw</options>
        <!-- <encoder>vcodec=h264,vb=512,aenc=ffmpeg{aac-profile=low},acodec=mp4a,ab=128,channels=2,audio-sync,venc=x264{profile=baseline,no-cabac,trellis=0,level=3,keyint=50,bframes=0,ref=1,no-interlaced,vbv-maxrate=512,vbv-bufsize=256,aq-mode=0,no-mbtree,partitions=none,no-weightb,weightp=0,me=dia,subme=0,no-mixed-refs,no-8x8dct}</encoder> -->
             <encoder>vcodec=h264,vb=512,venc=x264{profile=baseline,no-cabac,trellis=0,keyint=50},aenc=ffmpeg{aac-profile=low},acodec=mp4a,ab=128,samplerate=48000,channels=2,audio-sync</encoder>
        <muxer>:standard{access=file,mux=ts,dst=#OUT#}</muxer>
      </transcoderConfiguration>
    </transcoder>

    <!-- Direct streaming for WebMediaPortal -->
    <transcoder>
      <name>Direct</name>
      <description>VLC test profile</description>
      <bandwidth>10000</bandwidth>
      <target>pc-vlc-video</target>
      <transport>http</transport>
      <mime>video/x-unknown</mime>
      <videoStream>true</videoStream>
      <maxOutputWidth>1024</maxOutputWidth>
      <maxOutputHeight>600</maxOutputHeight>

      <transcoderConfiguration implementation="MPExtended.Services.StreamingService.Transcoders.Direct" />
    </transcoder>
    
    <!-- Flash streaming for WebMediaPortal -->
    <transcoder>
      <name>Flash HQ</name>
      <description>Flash HQ</description>
      <bandwidth>3000</bandwidth>
      <target>pc-flash-video</target>
      <transport>http</transport>
      <mime>video/x-flv</mime>
      <videoStream>true</videoStream>
      <maxOutputWidth>1280</maxOutputWidth>
      <maxOutputHeight>720</maxOutputHeight>

      <transcoderConfiguration implementation="MPExtended.Services.StreamingService.Transcoders.VLCWrapper">
        <disableSeeking>no</disableSeeking>
        <path>..\..\..\..\Libraries\Streaming\vlc-1.1.11\MPExtended.Libraries.VLCWrapper.exe</path>
        <options>--ffmpeg-hw</options>
        <encoder>vcodec=h264,vb=3500,venc=x264{profile=baseline},acodec=mp4a,ab=256,channels=2,samplerate=48000,audio-sync</encoder>
        <muxer>:standard{access=file,mux=ffmpeg{mux=flv},dst=#OUT#}</muxer>
      </transcoderConfiguration>
    </transcoder>
    <transcoder>
      <name>Flash LQ</name>
      <description>Flash LQ</description>
      <bandwidth>1000</bandwidth>
      <target>pc-flash-video</target>
      <transport>http</transport>
      <mime>video/x-flv</mime>
      <videoStream>true</videoStream>
      <maxOutputWidth>854</maxOutputWidth>
      <maxOutputHeight>450</maxOutputHeight>

      <transcoderConfiguration implementation="MPExtended.Services.StreamingService.Transcoders.VLCWrapper">
        <disableSeeking>no</disableSeeking>
        <path>..\..\..\..\Libraries\Streaming\vlc-1.1.11\MPExtended.Libraries.VLCWrapper.exe</path>
        <options>--ffmpeg-hw</options>
        <tsOptions>--sout-mux-caching=5000</tsOptions>
        <encoder>vcodec=h264,vb=900,venc=x264{profile=baseline},acodec=mp4a,ab=128,channels=2,samplerate=48000,audio-sync</encoder>
        <muxer>:standard{access=file,mux=ffmpeg{mux=flv},dst=#OUT#}</muxer>
      </transcoderConfiguration>
    </transcoder>
    <transcoder>
      <name>Flash Audio</name>
      <description>Flash Audio</description>
      <bandwidth>256</bandwidth>
      <target>pc-flash-audio</target>
      <transport>http</transport>
      <mime>video/x-flv</mime>
      <videoStream>false</videoStream>

      <transcoderConfiguration implementation="MPExtended.Services.StreamingService.Transcoders.VLCWrapper">
        <disableSeeking>no</disableSeeking>
        <path>..\..\..\..\Libraries\Streaming\vlc-1.1.11\MPExtended.Libraries.VLCWrapper.exe</path>
        <encoder>vcodec=none,acodec=mp4a,ab=256,channels=2,samplerate=48000</encoder>
        <muxer>:standard{access=file,mux=ffmpeg{mux=flv},dst=#OUT#}</muxer>
      </transcoderConfiguration>
    </transcoder>
  </transcoders>
</appconfig>